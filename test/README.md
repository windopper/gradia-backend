# Grade Prediction V2 테스트

이 디렉토리는 `/v2` 엔드포인트의 Grade Prediction 로직을 테스트하기 위한 스크립트를 포함하고 있습니다.

## 파일 구조

```
test/
├── README.md                    # 이 파일
├── run_test.py                  # 간편한 테스트 실행 스크립트
└── test_grade_prediction_v2.py  # Grade Prediction V2 테스트 스크립트
```

## 테스트 실행 방법

### 방법 1: 간편한 실행 스크립트 사용 (추천)

```bash
python test/run_test.py
```

### 방법 2: 환경변수 설정하여 직접 실행

PowerShell에서:
```powershell
$env:PYTHONPATH="." ; python test/test_grade_prediction_v2.py
```

또는 CMD에서:
```cmd
set PYTHONPATH=.
python test/test_grade_prediction_v2.py
```

### 1. 환경 설정

먼저 `.env` 파일에 Google API 키가 설정되어 있는지 확인하세요:

```bash
GOOGLE_API_KEY=your_api_key_here
```

## 테스트 내용

### Mock 데이터
- **과목**: 미적분학 (math_101)
- **이해도 수준**: 4/5
- **학습 세션**: 9개 세션 (4월~5월 데이터)

### 테스트 과정
1. **학습 패턴 분석**: `LearningPatternAnalyzer`를 사용하여 학습 데이터 분석
2. **프롬프트 생성**: Jinja2 템플릿을 사용하여 AI 프롬프트 생성
3. **AI 예측**: Google Gemini 모델을 통한 성적 예측
4. **결과 파싱**: XML 응답을 구조화된 JSON으로 변환

### 출력 정보
- 학습 패턴 분석 결과 (총 시간, 집중도, 일관성 등)
- 생성된 프롬프트 미리보기
- AI 원본 응답 (XML 형식)
- 구조화된 예측 결과:
  - 예상 점수 및 등급
  - 학습 분석 (량/질/일관성)
  - 주요 요인들
  - 개인화된 조언
  - 주간 학습 계획

## 주의사항

- Google API 키가 설정되지 않은 경우, 학습 패턴 분석까지만 실행됩니다.
- 실제 HTTP 요청 대신 Mock 데이터를 사용하므로 빠르게 테스트할 수 있습니다.
- pytest나 다른 테스트 프레임워크를 사용하지 않는 단순한 스크립트입니다.

## 예상 출력 예시

```
=== Grade Prediction V2 테스트 시작 ===

과목: 미적분학
이해도 수준: 4/5
학습 세션 수: 9개
--------------------------------------------------
=== 학습 패턴 분석 결과 ===
총 세션 수: 9
총 실제 학습 시간: 16.0시간
평균 집중도: 4.3
최근 일주일 학습 시간: 8.2시간
최근 일주일 평균 집중도: 4.8
학습 시간대 분포: 오전 집중형
주간 평균 학습 일수: 1.2일
평균 세션 길이: 107분
학습 일관성 점수: 2/5
집중도 트렌드: 향상
--------------------------------------------------
=== 구조화된 예측 결과 ===
예상 점수: 84
점수 범위: 80~88
예상 등급: B+
신뢰도: 60
... 